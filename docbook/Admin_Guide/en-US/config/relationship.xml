<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
 <!ENTITY % BOOK_ENTITIES SYSTEM "Admin_Guide.ent">
]>
<section id="admin.config.relationship">
	<title>Relationship Graphs</title>

	<para>MantisBT can graphically display the relationships between Issues.
		In the graphs, issues are represented by nodes and relationships
		as links between them.
		Two types of interactive visualizations are available,
		<emphasis>Dependencies</emphasis> and a full
		<emphasis>Relationships</emphasis> graph.
	</para>
	<para>This feature can also provide a visual representation of
		the <emphasis>Workflow</emphasis>, showing Issue States as nodes
		and the possible transitions between them as links.
		See <xref linkend="admin.lifecycle.workflow.transitions" />
	</para>

	<important>
		<para>This feature relies on tools from the external
			<ulink url="https://www.graphviz.org/">Graphviz</ulink>
			library, which must be installed separately.
		</para>
		<para>Most Linux distributions have a Graphviz package available
			for easy download and install.
			Under Windows, the software needs to be installed manually.
			For proper operations, it
			<ulink url="https://mantisbt.org/bugs/view.php?id=27584#c64693">may be required</ulink>
			to initialize the graph engine by running
			<literal>dot -c</literal>
			from an <emphasis>Administrator</emphasis> command prompt.
		</para>
		<para>The server relies on
			<ulink url="https://www.php.net/manual/en/function.proc-open.php">proc_open</ulink>
			to execute the tools, so this function must be enabled on your system.
		</para>
	</important>

	<variablelist>
		<varlistentry>
			<term>$g_relationship_graph_enable</term>
			<listitem>
				<para>
					This enables the relationship graphs feature.
					Default is OFF.
				</para>
			</listitem>
		</varlistentry>
		<varlistentry>
			<term>$g_relationship_graph_path</term>
			<listitem>
				<para>
					Full path to the directory containing the Graphviz library's binaries,
					requires trailing '/'.
					On Unix systems, this will usually be <literal>/usr/bin/</literal>.
					If this is left empty (which is the default), the system will look for the
					desired Graphviz tool on the system path.
				</para>
				<note><para>Your webserver must have execute permission to the
					programs in this directory to generate the relationship graphs.
					On windows, the IIS user also requires permissions to cmd.exe.
				</para></note>
			</listitem>
		</varlistentry>
		<varlistentry>
			<term>$g_relationship_graph_fontname</term>
			<listitem>
				<para>
					Font name, as required by Graphviz.
					If Graphviz fails to run for you, you are probably using a font name that the
					<ulink url="https://www.php.net/manual/en/intro.image.php">PHP GD extension</ulink>
					can't find.
					On Linux, try the name of the font file without the extension.
					The default value is 'Arial'.
				</para>
			</listitem>
		</varlistentry>
		<varlistentry>
			<term>$g_relationship_graph_fontsize</term>
			<listitem>
				<para>
					Font size, default is 8.
				</para>
			</listitem>
		</varlistentry>
		<varlistentry>
			<term>$g_relationship_graph_orientation</term>
			<listitem>
				<para>
					Default dependency orientation.
					If you have issues with lots of children or parents, leave as 'horizontal',
					otherwise, if you have lots of &quot;chained&quot; issue dependencies, change to 'vertical'.
					Default is 'horizontal'.
				</para>
			</listitem>
		</varlistentry>
		<varlistentry>
			<term>$g_relationship_graph_max_depth</term>
			<listitem>
				<para>
					Maximum depth for relation graphs.
					This only affects Relationship graphs,
					as Dependency graphs are always drawn to the full depth.
					The default value is 2.
				</para>
			</listitem>
		</varlistentry>
		<varlistentry>
			<term>$g_relationship_graph_view_on_click</term>
			<listitem>
				<para>
					Defines the behavior when clicking on an issue (node).
					If set to ON, clicking will open the bug view page for that issue,
					otherwise, it will navigate to the issue's relationship graph.
					Defaults to OFF.
				</para>
			</listitem>
		</varlistentry>
	</variablelist>
</section>
